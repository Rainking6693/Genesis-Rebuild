1.  **Code Generation:** I will generate TypeScript code for a React component named `StripeBilling`. This component will handle Stripe billing functionalities, including subscription management, payment processing, and customer portal integration. I will incorporate error handling mechanisms, such as try-catch blocks and error boundaries, to ensure robustness. I will also leverage TypeScript's type system to prevent common errors.
2.  **Error Handling:** I will implement comprehensive error handling to gracefully manage potential issues during Stripe API calls and user interactions. This includes displaying informative error messages to the user and logging errors for debugging purposes.
3.  **Type Safety:** I will utilize TypeScript's type system to define interfaces and types for Stripe API responses, user data, and component state. This will help prevent type-related errors and improve code maintainability.
4.  **Build Report:** I will generate a JSON build report summarizing the status of the component, including the number of lines of code, test coverage, type coverage, and any errors or warnings encountered during development.

Now, let's generate the code.

# Code Generation
write(
    content='// src/components/StripeBilling.tsx\nimport React, { useState, useEffect } from \'react\';\nimport { loadStripe } from \'@stripe/stripe-js\';\n\ninterface StripeBillingProps {\n  customerId: string;\n}\n\ninterface Subscription {\n  id: string;\n  status: string;\n  price: string;\n}\n\nconst StripeBilling: React.FC<StripeBillingProps> = ({ customerId }) => {\n  const [stripe, setStripe] = useState<stripe.Stripe | null>(null);\n  const [subscription, setSubscription] = useState<Subscription | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const initializeStripe = async () => {\n      try {\n        const stripeInstance = await loadStripe(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY || \'\');\n        if (stripeInstance) {\n          setStripe(stripeInstance);\n        } else {\n          throw new Error(\'Stripe initialization failed\');\n        }\n      } catch (err: any) {\n        setError(`Failed to initialize Stripe: ${err.message}`);\n      }\n    };\n\n    initializeStripe();\n  }, []);\n\n  useEffect(() => {\n    const fetchSubscription = async () => {\n      if (stripe && customerId) {\n        setLoading(true);\n        try {\n          const response = await fetch(`/api/stripe/subscription?customerId=${customerId}`);\n          if (!response.ok) {\n            throw new Error(`Failed to fetch subscription: ${response.statusText}`);\n          }\n          const data = await response.json();\n          setSubscription(data.subscription);\n        } catch (err: any) {\n          setError(`Failed to fetch subscription: ${err.message}`);\n        } finally {\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchSubscription();\n  }, [stripe, customerId]);\n\n  const handleManageSubscription = async () => {\n    if (stripe && customerId) {\n      try {\n        const response = await fetch(\'/api/stripe/create-portal-session\', {\n          method: \'POST\',\n          headers: {\n            \'Content-Type\': \'application/json\',\n          },\n          body: JSON.stringify({ customerId }),\n        });\n\n        if (!response.ok) {\n          throw new Error(`Failed to create portal session: ${response.statusText}`);\n        }\n\n        const data = await response.json();\n\n        if (data.url) {\n          window.location.href = data.url;\n        } else {\n          throw new Error(\'No portal URL returned\');\n        }\n      } catch (err: any) {\n        setError(`Failed to manage subscription: ${err.message}`);\n      }\n    }\n  };\n\n  if (error) {\n    return <div className="error">Error: {error}</div>;\n  }\n\n  if (loading) {\n    return <div>Loading subscription information...</div>;\n  }\n\n  return (\n    <div className="stripe-billing">\n      <h2>Subscription Details</h2>\n      {subscription ? (\n        <div>\n          <p>Status: {subscription.status}</p>\n          <p>Price: {subscription.price}</p>\n          <button onClick={handleManageSubscription}>Manage Subscription</button>\n        </div>\n      ) : (\n        <p>No active subscription found.</p>\n      )}\n    </div>\n  );\n};\n\nexport default StripeBilling;\n',
    file_path='src/components/StripeBilling.tsx'
)