# Generate Stripe billing component
Write(
    content='// src/components/StripeBilling.tsx\nimport React, { useState, useEffect } from \'react\';\nimport { loadStripe } from \'@stripe/stripe-js\';\n\nconst stripePromise = loadStripe(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY || \'\');\n\ninterface StripeBillingProps {\n  priceId: string;\n  customerId?: string;\n  onSuccess?: () => void;\n  onError?: (error: Error) => void;\n}\n\nexport default function StripeBilling({ priceId, customerId, onSuccess, onError }: StripeBillingProps) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    if (error && onError) {\n      onError(error);\n    }\n  }, [error, onError]);\n\n  const handleClick = async (event: React.MouseEvent<HTMLButtonElement>) => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const stripe = await stripePromise;\n\n      if (!stripe) {\n        throw new Error(\'Stripe failed to load. Check your API key.\');\n      }\n\n      const { error: stripeError } = await stripe.redirectToCheckout({\n        lineItems: [{\n          price: priceId, // Replace with the ID of your price\n          quantity: 1,\n        }],\n        mode: \'subscription\',\n        successUrl: `${window.location.origin}/success?session_id={CHECKOUT_SESSION_ID}`,\n        cancelUrl: `${window.location.origin}/cancel`,\n        customer: customerId,\n      });\n\n      if (stripeError) {\n        setError(new Error(stripeError.message));\n      }\n\n    } catch (e: any) {\n      setError(e);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <button role="link" onClick={handleClick} disabled={isLoading}>\n      {isLoading ? \'Loading...\' : \'Subscribe\'}\n      {error && <div style={{ color: \'red\' }}>Error: {error.message}</div>}\n    </button>\n  );\n}\n\n// Error Boundary Component (Simple Example)\ninterface ErrorBoundaryProps {\n  children: React.ReactNode;\n}\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error: Error | null;\n}\n\nclass ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    // Update state so the next render will show the fallback UI.\n    return {\n      hasError: true,\n      error: error,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    // You can also log the error to an error reporting service\n    console.error(\'Caught error in ErrorBoundary\', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong. {this.state.error?.message}</h1>;\n    }\n\n    return this.props.children; \n  }\n}\n\n// Usage Example:\n// <ErrorBoundary>\n//   <StripeBilling priceId="price_123" />\n// </ErrorBoundary>\n',
    file_path='src/components/StripeBilling.tsx'
)