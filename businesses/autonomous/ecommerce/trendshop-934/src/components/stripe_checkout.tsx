# Generate the Stripe Checkout component code.
write(content='// src/components/StripeCheckout.tsx\nimport React, { useState, useEffect } from \'react\';\nimport { loadStripe } from \'@stripe/stripe-js\';\nimport { Elements, CardElement, useStripe, useElements } from \'@stripe/react-stripe-js\';\n\n// Replace with your actual publishable key\nconst stripePromise = loadStripe(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY || \'\');\n\nconst CheckoutForm = () => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const [error, setError] = useState<string | null>(null);\n  const [processing, setProcessing] = useState(false);\n  const [disabled, setDisabled] = useState(true);\n  const [succeeded, setSucceeded] = useState(false);\n  const [clientSecret, setClientSecret] = useState(\'\');\n\n  useEffect(() => {\n    // Create PaymentIntent as soon as the page loads\n    fetch(\'/api/create-payment-intent\', {\n      method: \'POST\',\n      headers: {\n        \'Content-Type\': \'application/json\',\n      },\n      body: JSON.stringify({ items: [{ id: \'xl-tshirt\' }] }), // Replace with actual cart items\n    })\n      .then((res) => res.json())\n      .then((data) => setClientSecret(data.clientSecret))\n      .catch((err) => {\n        console.error(\'Error creating PaymentIntent:\', err);\n        setError(\'Failed to initialize payment. Please try again.\');\n      });\n  }, []);\n\n  const handleChange = async (event: any) => {\n    // Listen for changes in the CardElement\n    // and display any errors as the customer types their card details\n    setDisabled(event.empty);\n    setError(event.error ? event.error.message : null);\n  };\n\n  const handleSubmit = async (event: any) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      // Stripe.js has not loaded yet.\n      // Make sure to disable form submission until Stripe.js has loaded.\n      return;\n    }\n\n    setProcessing(true);\n\n    const payload = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: elements.getElement(CardElement) as any,\n      },\n    });\n\n    if (payload.error) {\n      setError(`Payment failed ${payload.error.message}`);\n      setProcessing(false);\n    } else {\n      setError(null);\n      setProcessing(false);\n      setSucceeded(true);\n    }\n  };\n\n  return (\n    <form id="payment-form" onSubmit={handleSubmit}>\n      <CardElement id="card-element" onChange={handleChange} />\n      <div className="error-message" role="alert">\n        {error}\n      </div>\n      <button disabled={processing || disabled || succeeded} id="submit">\n        <span id="button-text">\n          {processing ? <div className="spinner" id="spinner"></div> : `Pay`}\n        </span>\n      </button>\n      {/* Show any error that happens when processing the payment */}\n      {succeeded ? (\n        <p className="result-message">\n          Payment succeeded, see the result in your\n          <a href={`https://dashboard.stripe.com/test/payments`}>\n            Stripe dashboard.\n          </a> Refresh the page to pay again!\n        </p>\n      ) : null}\n    </form>\n  );\n};\n\nconst StripeCheckout = () => (\n  <Elements stripe={stripePromise}>\n    <CheckoutForm />\n  </Elements>\n);\n\nexport default StripeCheckout;\n', file_path='src/components/StripeCheckout.tsx')