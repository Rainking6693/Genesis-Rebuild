# PythonAnywhere Complete Deployment Guide

**API Token:** `d96e5e35ee2070fd3d41f83ddb856859a7f4ea7d`

## üöÄ Complete Deployment Steps

### Step 1: Log into PythonAnywhere

1. Go to https://www.pythonanywhere.com
2. Log in with your account
3. The API token will be used for automated setup

### Step 2: Upload Code

**Option A: Git Clone (Recommended)**
```bash
# In PythonAnywhere Bash console
cd ~
git clone https://github.com/Rainking6693/Genesis-Rebuild.git genesis-rebuild
cd genesis-rebuild
```

**Option B: Files Tab Upload**
1. Go to **Files** tab
2. Navigate to `/home/yourusername/`
3. Upload project files or use zip upload

### Step 3: Run Automated Setup

```bash
cd ~/genesis-rebuild
bash scripts/setup_pythonanywhere.sh
```

This script will:
- ‚úÖ Create Python 3.12 virtual environment
- ‚úÖ Install all dependencies
- ‚úÖ Generate secure API keys
- ‚úÖ Create .env file
- ‚úÖ Create WSGI file

### Step 4: Create Web App

1. Go to **Web** tab
2. Click **"Add a new web app"**
3. Choose domain: `yourusername.pythonanywhere.com`
4. Select **Python 3.12**
5. Choose **Manual configuration**
6. Click **Next** ‚Üí **Finish**

### Step 5: Configure Web App

In the **Web** tab, set:

- **Source code directory**: `/home/yourusername/genesis-rebuild`
- **Working directory**: `/home/yourusername/genesis-rebuild`
- **Virtualenv**: `/home/yourusername/genesis-rebuild/venv`
- **Python version**: 3.12

### Step 6: Configure WSGI File

1. In **Web** tab, click **"WSGI configuration file"** link
2. **Delete all existing content**
3. Copy the entire contents of `wsgi_pythonanywhere.py` from your project
4. **IMPORTANT:** Replace `yourusername` with your actual PythonAnywhere username!
5. Save the file

### Step 7: Set Environment Variables

In **Web** tab ‚Üí **Environment variables** section, add:

```
GENESIS_ENV=production
ENVIRONMENT=production
A2A_API_KEY=(check .env file - was generated by setup script)
GENESIS_API_KEY=(check .env file - was generated by setup script)
DEBUG=false
PYTHONPATH=/home/yourusername/genesis-rebuild
```

To get the API keys:
```bash
cd ~/genesis-rebuild
cat .env | grep API_KEY
```

### Step 8: Configure Static Files (Optional - for Dashboard Frontend)

If deploying the Next.js frontend:

1. In **Web** tab ‚Üí **Static files** section
2. Add mapping:
   - **URL**: `/static`
   - **Directory**: `/home/yourusername/genesis-rebuild/genesis-dashboard/.next/static`

### Step 9: Reload Web App

1. Click **"Reload"** button in Web tab
2. Wait for reload to complete (green checkmark)
3. Check for any errors in **Error log**

### Step 10: Test Deployment

```bash
# Test health endpoint
curl https://yourusername.pythonanywhere.com/api/health

# Should return:
# {"status":"healthy","timestamp":"...","version":"1.0.0"}
```

## üìä Dashboard Endpoints

Once deployed, access:

- **Health Check**: `https://yourusername.pythonanywhere.com/api/health`
- **Agent Status**: `https://yourusername.pythonanywhere.com/api/agents`
- **HALO Routes**: `https://yourusername.pythonanywhere.com/api/halo/routes`
- **CaseBank Memory**: `https://yourusername.pythonanywhere.com/api/casebank`
- **OTEL Traces**: `https://yourusername.pythonanywhere.com/api/traces`
- **Approvals**: `https://yourusername.pythonanywhere.com/api/approvals`
- **A2A Service**: `https://yourusername.pythonanywhere.com/a2a/`

## üîç Verification Checklist

- [ ] Code uploaded to `/home/yourusername/genesis-rebuild`
- [ ] Virtual environment created and activated
- [ ] All dependencies installed
- [ ] .env file created with API keys
- [ ] Web app created in Web tab
- [ ] WSGI file configured (with correct username!)
- [ ] Environment variables set
- [ ] Source code directory set
- [ ] Virtualenv path set
- [ ] Web app reloaded
- [ ] Health endpoint returns 200 OK

## üÜò Troubleshooting

### 500 Internal Server Error

1. Check **Error log** in Web tab
2. Common issues:
   - WSGI file has wrong username
   - Import errors (check dependencies)
   - Environment variables not set
   - Virtualenv not activated

### Module Not Found

```bash
# Verify virtualenv is correct
cd ~/genesis-rebuild
source venv/bin/activate
python -c "import fastapi; print('OK')"
```

### Import Errors in WSGI

- Check PYTHONPATH is set
- Verify project_home path is correct
- Ensure venv site-packages is in sys.path

### Dashboard Not Loading

- Verify backend API is responding: `/api/health`
- Check CORS settings in `genesis-dashboard/backend/api.py`
- Ensure frontend is built (if deploying frontend)

## üìù Next Steps After Deployment

1. **Monitor Logs**: Check Error log regularly
2. **Set Up Scheduled Tasks**: Use Tasks tab for cron jobs
3. **Configure Custom Domain**: In Web tab (if needed)
4. **Set Up Database**: In Databases tab (if needed)
5. **Deploy Frontend**: To Vercel/Netlify pointing to PythonAnywhere API

## üîê Security Notes

- API keys are auto-generated securely
- Change default API keys in production
- Configure CORS for production domains
- Enable HTTPS (automatic on PythonAnywhere)
- Review error logs regularly

---

**Status:** Ready for deployment
**Last Updated:** December 2024


