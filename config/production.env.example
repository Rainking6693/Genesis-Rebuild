# Genesis Production Environment Variables
# Feature Flag System Configuration

# ============================================
# FEATURE FLAGS (Production Deployment)
# ============================================

# Feature flag configuration file path
FEATURE_FLAGS_CONFIG=/home/genesis/genesis-rebuild/config/feature_flags.json

# Master orchestration flag (emergency override)
# Set to 'false' to instantly rollback to v1.0
ORCHESTRATION_ENABLED=true

# Security hardening (should always be true in production)
SECURITY_HARDENING_ENABLED=true

# LLM Integration for orchestration decisions
# Set to 'false' to use heuristic fallback (saves costs)
LLM_INTEGRATION_ENABLED=true

# AATC System (dynamic tool/agent creation)
# WARNING: High security risk - only enable after security audit
AATC_SYSTEM_ENABLED=false

# Reward model learning
REWARD_LEARNING_ENABLED=true

# Error handling (circuit breaker, retry, degradation)
# Should always be enabled in production
ERROR_HANDLING_ENABLED=true

# OpenTelemetry observability
# Provides distributed tracing and metrics (<1% overhead)
OTEL_ENABLED=true

# Performance optimizations (caching, indexing, batching)
# Provides 46.3% speed improvement
PERFORMANCE_OPTIMIZATIONS_ENABLED=true

# Phase deployment flags
PHASE_1_COMPLETE=true
PHASE_2_COMPLETE=true
PHASE_3_COMPLETE=true
PHASE_4_DEPLOYMENT=false  # Progressive rollout (0% â†’ 100% over 7 days)

# Safety flags (emergency controls)
EMERGENCY_SHUTDOWN=false  # Set to 'true' to kill all operations
READ_ONLY_MODE=false      # Set to 'true' to prevent writes
MAINTENANCE_MODE=false    # Set to 'true' to reject new requests

# ============================================
# DEPLOYMENT CONFIGURATION
# ============================================

# Deployment environment (staging, production)
DEPLOYMENT_ENV=production

# Canary deployment percentage (0-100)
# Used for gradual rollout of new features
CANARY_PERCENTAGE=0

# Health check monitoring
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL_SEC=30
HEALTH_CHECK_TIMEOUT_SEC=10

# Auto-rollback thresholds
AUTO_ROLLBACK_ERROR_RATE_PCT=1.0    # Rollback if error rate > 1%
AUTO_ROLLBACK_P95_LATENCY_MS=500    # Rollback if P95 latency > 500ms
AUTO_ROLLBACK_WINDOW_SEC=300        # Monitor over 5-minute windows

# ============================================
# OBSERVABILITY
# ============================================

# OpenTelemetry configuration
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=genesis-orchestrator
OTEL_TRACE_SAMPLE_RATE=1.0  # Sample 100% in production

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json  # json or text
LOG_FILE=/home/genesis/genesis-rebuild/logs/production.log

# ============================================
# AZURE AI CONFIGURATION
# ============================================

# Azure AI Project
AZURE_AI_PROJECT_ENDPOINT=https://genesis-rebuild-resource.services.ai.azure.com
AZURE_AI_PROJECT_PATH=/api/projects/genesis-rebuild
AZURE_AI_MODEL_DEPLOYMENT=gpt-4o

# ============================================
# LLM API KEYS
# ============================================

# OpenAI (for GPT-4o orchestration)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Anthropic (for Claude Sonnet 4 code generation)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Google (for Gemini Flash high-throughput tasks)
GOOGLE_API_KEY=your-google-api-key-here

# DeepSeek (for open-source fallback)
DEEPSEEK_API_KEY=your-deepseek-api-key-here

# ============================================
# DAAO ROUTING CONFIGURATION
# ============================================

# Cost optimization thresholds
DAAO_ENABLED=true
DAAO_BUDGET_CONSCIOUS=true  # Prefer cost savings over max quality
DAAO_FALLBACK_MODEL=gpt-4o-mini

# Model tier pricing (USD per 1M tokens)
DAAO_PREMIUM_COST=3.0    # GPT-4o
DAAO_STANDARD_COST=0.5   # GPT-4o-mini
DAAO_BUDGET_COST=0.03    # Gemini Flash

# ============================================
# SECURITY CONFIGURATION
# ============================================

# Prompt injection protection
PROMPT_SHIELD_ENABLED=true
DANGEROUS_PATTERN_THRESHOLD=0.8  # Block if confidence > 80%

# Agent authentication
AGENT_AUTH_ENABLED=true
AGENT_AUTH_ALGORITHM=HMAC-SHA256
AGENT_AUTH_SECRET_KEY=your-secret-key-here-change-in-production

# DoS protection
TASK_COUNTER_ENABLED=true
MAX_TASKS_PER_AGENT=1000

# Sandbox for untrusted code
SANDBOX_ENABLED=true
SANDBOX_TIMEOUT_SEC=30
SANDBOX_MAX_MEMORY_MB=512

# ============================================
# ERROR HANDLING CONFIGURATION
# ============================================

# Circuit breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_SEC=60

# Retry configuration
RETRY_MAX_ATTEMPTS=3
RETRY_MAX_DELAY_SEC=60
RETRY_EXPONENTIAL_BASE=2

# ============================================
# DATABASE CONFIGURATION
# ============================================

# MongoDB (for shared memory/learning)
MONGODB_URL=mongodb://localhost:27017
MONGODB_DATABASE=genesis_production

# Redis (for caching)
REDIS_URL=redis://localhost:6379
REDIS_TTL_SEC=3600

# ============================================
# PERFORMANCE CONFIGURATION
# ============================================

# Caching
CACHE_ENABLED=true
CACHE_MAX_SIZE=10000
CACHE_TTL_SEC=3600

# Connection pooling
POOL_SIZE=10
POOL_MAX_OVERFLOW=5

# Batch processing
BATCH_SIZE=100
BATCH_TIMEOUT_SEC=5

# ============================================
# MONITORING & ALERTS
# ============================================

# Metrics export
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Alert webhooks
ALERT_WEBHOOK_URL=https://your-monitoring-service.com/webhook
ALERT_ON_ERROR_RATE=true
ALERT_ON_HIGH_LATENCY=true
ALERT_ON_CIRCUIT_BREAK=true

# ============================================
# DEVELOPMENT OVERRIDES
# ============================================

# Set to 'true' to enable development mode
DEV_MODE=false

# Set to 'true' to enable debug logging
DEBUG=false

# Set to 'true' to enable sensitive data logging (NEVER in production)
LOG_SENSITIVE_DATA=false
