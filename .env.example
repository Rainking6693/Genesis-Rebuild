# Genesis Rebuild Environment Configuration
# Copy this file to .env and fill in your actual API keys

# ============================================================
# LLM API KEYS (Phase 2 - LLM Integration)
# ============================================================

# OpenAI API Key (for GPT-4o)
# Used for: Orchestration, strategic decision making, task decomposition
# Cost: $3/1M tokens
# Get your key: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic API Key (for Claude Sonnet 4)
# Used for: Code generation (72.7% SWE-bench accuracy), complex reasoning
# Cost: $3/1M tokens
# Get your key: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Google Gemini API Key (for Gemini 2.0 Flash) - RECOMMENDED
# Used for: Vision tasks (screenshots, OCR), high-throughput cheap tasks
# Cost: $0.03/1M tokens (100x cheaper than GPT-4o, 20x cheaper than Claude for vision)
# Get your key: https://aistudio.google.com/apikey
# Optional: Falls back to Sonnet if not set
GEMINI_API_KEY=your_gemini_api_key_here

# ============================================================
# AZURE CONFIGURATION (Phase 1 - Foundation)
# ============================================================

# Azure OpenAI Service (if using Azure instead of OpenAI directly)
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
# AZURE_OPENAI_API_KEY=your_azure_openai_key_here
# AZURE_OPENAI_DEPLOYMENT=gpt-4o

# ============================================================
# GUI AUTOMATION BACKEND (Agent-S Integration - Oct 2025)
# ============================================================

# Computer Use Backend Selection
# Options: gemini (mock, default), agent_s (production, 83.6% OSWorld)
# Requires OPENAI_API_KEY for agent_s backend
COMPUTER_USE_BACKEND=gemini

# DOM/Accessibility Tree Parsing (Week 2 Addition - Oct 27, 2025)
# Enables multi-modal GUI understanding (vision + DOM + accessibility)
# Expected: 87% accuracy improvement over vision-only (paper validated)
# Research: https://arxiv.org/abs/2510.09244
# Options: true (enhanced, Playwright-based), false (vision-only, default)
# Note: Requires active Playwright browser session for full functionality
USE_DOM_PARSING=false

# ============================================================
# DATABASE CONFIGURATION (Future - Layer 6)
# ============================================================

# MongoDB connection string
# MONGODB_URI=mongodb://localhost:27017/genesis

# Redis connection string
# REDIS_URL=redis://localhost:6379/0

# ============================================================
# OBSERVABILITY & MONITORING
# ============================================================

# OpenTelemetry settings
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
# OTEL_SERVICE_NAME=genesis-orchestrator

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ============================================================
# SECURITY SETTINGS
# ============================================================

# Max recursion depth for task decomposition (VULN-003 fix)
MAX_RECURSION_DEPTH=5

# Max total tasks per DAG (VULN-003 fix)
MAX_TOTAL_TASKS=1000

# Max request length (VULN-001 fix)
MAX_REQUEST_LENGTH=5000

# Enable input sanitization
ENABLE_INPUT_SANITIZATION=true

# ============================================================
# PERFORMANCE TUNING
# ============================================================

# LLM request timeout (seconds)
LLM_TIMEOUT=60

# LLM temperature for task decomposition (0.0-1.0)
LLM_TEMPERATURE=0.3

# Max concurrent LLM requests
MAX_CONCURRENT_LLM_REQUESTS=5

# ============================================================
# DEVELOPMENT & TESTING
# ============================================================

# Environment mode (development, staging, production)
ENVIRONMENT=development

# Enable debug mode
DEBUG=false

# Use mock LLM client for testing (no API calls)
USE_MOCK_LLM=false

# ============================================================
# COST TRACKING
# ============================================================

# Enable cost tracking
ENABLE_COST_TRACKING=true

# Cost alert threshold (USD)
COST_ALERT_THRESHOLD=10.0

# ============================================================
# POWER SAMPLING (Phase 6 - Advanced Reasoning)
# ============================================================

# Enable Power Sampling MCMC-based reasoning (training-free RL-level performance)
# When enabled, uses Metropolis-Hastings MCMC to sample from sharpened distribution p^α
# Cost: 8.84× inference multiplier, but matches RL post-training quality
# Reference: https://arxiv.org/abs/2510.14901
POWER_SAMPLING_ENABLED=false

# Number of MCMC iterations per block (default: 10)
# Higher values → better samples, higher cost
# Range: 1-20, Paper optimal: 10
POWER_SAMPLING_N_MCMC=10

# Sharpening exponent α for distribution p^α (default: 2.0)
# Higher values → stronger sharpening (focus on high-likelihood sequences)
# Range: 1.0-3.0, Paper optimal: 2.0
POWER_SAMPLING_ALPHA=2.0

# Block size for autoregressive construction (default: 32)
# Tokens per block, must divide evenly into max_new_tokens
# Options: 16, 32, 64, 128
# Paper optimal: 32
POWER_SAMPLING_BLOCK_SIZE=32

# ============================================================
# HTDAG POWER SAMPLING INTEGRATION (Phase 6)
# ============================================================

# Enable Power Sampling for HTDAG top-level task decomposition
# When enabled, uses MCMC exploration to generate higher-quality task hierarchies
# Expected: +15-25% decomposition quality, 2-3x token cost (worthwhile for critical planning)
# Reference: docs/specs/POWER_SAMPLING_HTDAG_INTEGRATION.md
POWER_SAMPLING_HTDAG_ENABLED=false

# HTDAG-specific MCMC parameters (defaults inherited from global settings above)
# Override only if you need different settings for HTDAG vs other components
# POWER_SAMPLING_N_MCMC=10
# POWER_SAMPLING_ALPHA=2.0
# POWER_SAMPLING_BLOCK_SIZE=32

# ============================================================
# NOTES
# ============================================================
#
# SECURITY BEST PRACTICES:
# 1. Never commit .env to git (it's in .gitignore)
# 2. Use different keys for dev/staging/prod
# 3. Rotate API keys regularly
# 4. Use environment-specific key restrictions when available
#
# COST OPTIMIZATION:
# 1. Use Gemini Flash for simple tasks (100x cheaper)
# 2. Enable caching to reduce redundant LLM calls
# 3. Set LLM_TEMPERATURE=0.0 for deterministic outputs
# 4. Monitor costs with ENABLE_COST_TRACKING=true
#
# For production deployment, consider using:
# - Azure Key Vault for secret management
# - AWS Secrets Manager
# - HashiCorp Vault
#
