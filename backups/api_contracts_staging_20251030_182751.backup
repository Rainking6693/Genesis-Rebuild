{
  "timestamp": "2025-10-30T18:27:59.435220",
  "backup_id": "api_contracts_staging_20251030_182751",
  "specs": {
    "openapi_spec:halo_route": "{\"openapi\": \"3.1.0\", \"info\": {\"title\": \"Genesis HALO Agent Routing API\", \"version\": \"1.0.0\", \"description\": \"API for logic-based hierarchical agent routing.\\n\\nBased on HALO (arXiv:2505.13516), this endpoint routes tasks from a DAG\\nto appropriate agents using declarative logic rules and capability matching.\\n\\n**Key Features:**\\n- 30+ declarative routing rules (priority-ordered)\\n- Capability-based agent matching\\n- Load balancing across 15 agents\\n- Explainable agent selection (traceable reasoning)\\n- CaseBank integration (learn from past routing decisions)\\n- DAAO cost optimization integration\\n\\n**Author:** Hudson (Code Review & Quality Specialist)\\n**Created:** 2025-10-30\\n**Source File:** `infrastructure/halo_router.py`\\n\"}, \"servers\": [{\"url\": \"http://localhost:8080\", \"description\": \"Development server\"}, {\"url\": \"https://staging.genesis.ai/api\", \"description\": \"Staging server\"}, {\"url\": \"https://genesis.ai/api\", \"description\": \"Production server\"}], \"security\": [{\"ApiKeyAuth\": []}], \"paths\": {\"/orchestrate/route\": {\"post\": {\"summary\": \"Route tasks to appropriate agents\", \"description\": \"Routes tasks from a DAG to suitable agents based on declarative rules and capabilities.\\n\\n**Routing Algorithm:**\\n1. Apply declarative rules (priority order, highest first)\\n2. Capability-based matching (agent skills vs task requirements)\\n3. Load balancing (prefer agents with lower workload)\\n4. CaseBank lookup (learn from successful past routings)\\n5. Explainability (generate reasoning for each assignment)\\n\\n**15 Available Agents:**\\n- spec: Requirements specification\\n- builder: Code generation (frontend/backend/database)\\n- qa: Quality assurance, testing\\n- security: Security audits\\n- deploy: Deployment, infrastructure\\n- marketing: Marketing strategy\\n- support: Customer support\\n- analyst: Data analysis\\n- legal: Legal compliance\\n- content: Content writing\\n- seo: SEO optimization\\n- email: Email campaigns\\n- billing: Billing, invoicing\\n- maintenance: System maintenance\\n- onboarding: User onboarding\\n\", \"operationId\": \"routeTasks\", \"tags\": [\"Orchestration\", \"HALO\"], \"parameters\": [{\"name\": \"X-Idempotency-Key\", \"in\": \"header\", \"required\": true, \"schema\": {\"type\": \"string\", \"format\": \"uuid\"}, \"description\": \"Idempotency key for routing requests\"}, {\"name\": \"X-Schema-Version\", \"in\": \"header\", \"required\": false, \"schema\": {\"type\": \"string\", \"default\": \"v1.0.0\"}}, {\"name\": \"X-Correlation-Id\", \"in\": \"header\", \"required\": false, \"schema\": {\"type\": \"string\", \"format\": \"uuid\"}}], \"requestBody\": {\"required\": true, \"content\": {\"application/json\": {\"schema\": {\"type\": \"object\", \"required\": [\"dag_id\", \"tasks\"], \"properties\": {\"dag_id\": {\"type\": \"integer\", \"description\": \"DAG identifier from /orchestrate/decompose\", \"example\": 42}, \"tasks\": {\"type\": \"array\", \"description\": \"Tasks to route\", \"minItems\": 1, \"maxItems\": 1000, \"items\": {\"type\": \"object\", \"required\": [\"task_id\", \"description\", \"task_type\"], \"properties\": {\"task_id\": {\"type\": \"string\", \"example\": \"task_1\"}, \"description\": {\"type\": \"string\", \"example\": \"Design database schema\"}, \"task_type\": {\"type\": \"string\", \"enum\": [\"design\", \"implement\", \"test\", \"deploy\", \"marketing\", \"support\", \"analytics\", \"security\"], \"example\": \"design\"}, \"priority\": {\"type\": \"number\", \"minimum\": 0.0, \"maximum\": 1.0, \"example\": 0.8}, \"estimated_complexity\": {\"type\": \"string\", \"enum\": [\"trivial\", \"easy\", \"medium\", \"hard\", \"expert\"], \"example\": \"medium\"}, \"required_skills\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}, \"example\": [\"database\", \"postgresql\", \"schema_design\"]}}}}, \"enable_casebank\": {\"type\": \"boolean\", \"default\": true, \"description\": \"Enable CaseBank learning from past successful routings\"}, \"enable_cost_optimization\": {\"type\": \"boolean\", \"default\": false, \"description\": \"Enable DAAO cost optimization (route to cheaper models when possible)\"}, \"max_workload_per_agent\": {\"type\": \"integer\", \"minimum\": 1, \"maximum\": 100, \"default\": 10, \"description\": \"Maximum concurrent tasks per agent (load balancing)\"}}}, \"examples\": {\"simple_routing\": {\"summary\": \"Simple 4-task routing\", \"value\": {\"dag_id\": 42, \"tasks\": [{\"task_id\": \"task_1\", \"description\": \"Design database schema\", \"task_type\": \"design\", \"priority\": 0.8, \"estimated_complexity\": \"medium\"}, {\"task_id\": \"task_2\", \"description\": \"Implement REST API\", \"task_type\": \"implement\", \"priority\": 0.7, \"estimated_complexity\": \"hard\"}, {\"task_id\": \"task_3\", \"description\": \"Write integration tests\", \"task_type\": \"test\", \"priority\": 0.6, \"estimated_complexity\": \"medium\"}, {\"task_id\": \"task_4\", \"description\": \"Deploy to production\", \"task_type\": \"deploy\", \"priority\": 0.9, \"estimated_complexity\": \"easy\"}], \"enable_casebank\": true, \"enable_cost_optimization\": false}}, \"complex_routing_with_optimization\": {\"summary\": \"Complex routing with cost optimization\", \"value\": {\"dag_id\": 43, \"tasks\": [{\"task_id\": \"task_1\", \"description\": \"Create marketing strategy\", \"task_type\": \"marketing\", \"priority\": 0.9, \"estimated_complexity\": \"hard\", \"required_skills\": [\"marketing\", \"strategy\", \"b2b\"]}, {\"task_id\": \"task_2\", \"description\": \"Write blog posts\", \"task_type\": \"marketing\", \"priority\": 0.5, \"estimated_complexity\": \"easy\", \"required_skills\": [\"content_writing\", \"seo\"]}, {\"task_id\": \"task_3\", \"description\": \"Security audit\", \"task_type\": \"security\", \"priority\": 1.0, \"estimated_complexity\": \"expert\", \"required_skills\": [\"security\", \"penetration_testing\"]}], \"enable_casebank\": true, \"enable_cost_optimization\": true, \"max_workload_per_agent\": 5}}}}}}, \"responses\": {\"200\": {\"description\": \"Success - Tasks routed to agents\", \"headers\": {\"X-Request-Id\": {\"schema\": {\"type\": \"string\", \"format\": \"uuid\"}}, \"X-Schema-Version\": {\"schema\": {\"type\": \"string\"}}, \"X-RateLimit-Limit\": {\"schema\": {\"type\": \"integer\"}}, \"X-RateLimit-Remaining\": {\"schema\": {\"type\": \"integer\"}}, \"X-RateLimit-Reset\": {\"schema\": {\"type\": \"integer\"}}}, \"content\": {\"application/json\": {\"schema\": {\"type\": \"object\", \"required\": [\"data\", \"metadata\"], \"properties\": {\"data\": {\"type\": \"object\", \"required\": [\"routing_plan\", \"assignments\", \"explanations\"], \"properties\": {\"routing_plan\": {\"type\": \"object\", \"description\": \"Complete routing plan\", \"properties\": {\"is_complete\": {\"type\": \"boolean\", \"description\": \"True if all tasks assigned\", \"example\": true}}}, \"assignments\": {\"type\": \"object\", \"description\": \"Task-to-agent mapping (task_id -> agent_name)\", \"additionalProperties\": {\"type\": \"string\"}, \"example\": {\"task_1\": \"builder\", \"task_2\": \"builder\", \"task_3\": \"qa\", \"task_4\": \"deploy\"}}, \"explanations\": {\"type\": \"object\", \"description\": \"Reasoning for each assignment (task_id -> explanation)\", \"additionalProperties\": {\"type\": \"string\"}, \"example\": {\"task_1\": \"Builder agent selected: task_type='design' matches supported types, database skills available\", \"task_2\": \"Builder agent selected: task_type='implement' matches supported types, API development capability\", \"task_3\": \"QA agent selected: task_type='test' matches supported types, integration testing expertise\", \"task_4\": \"Deploy agent selected: task_type='deploy' matches supported types, production deployment capability\"}}, \"unassigned_tasks\": {\"type\": \"array\", \"description\": \"Tasks without suitable agent\", \"items\": {\"type\": \"string\"}, \"example\": []}, \"workload\": {\"type\": \"object\", \"description\": \"Task count per agent (agent_name -> task_count)\", \"additionalProperties\": {\"type\": \"integer\"}, \"example\": {\"builder\": 2, \"qa\": 1, \"deploy\": 1, \"spec\": 0, \"security\": 0}}, \"routing_metadata\": {\"type\": \"object\", \"description\": \"Metadata about routing process\", \"properties\": {\"rules_applied\": {\"type\": \"integer\", \"description\": \"Number of routing rules evaluated\", \"example\": 12}, \"rules_matched\": {\"type\": \"integer\", \"description\": \"Number of rules that matched\", \"example\": 4}, \"casebank_hits\": {\"type\": \"integer\", \"description\": \"Number of CaseBank matches used\", \"example\": 2}, \"fallback_used\": {\"type\": \"boolean\", \"description\": \"True if capability matching was used (no rule matched)\", \"example\": false}, \"cost_optimization_applied\": {\"type\": \"boolean\", \"example\": false}}}}}, \"metadata\": {\"type\": \"object\", \"required\": [\"request_id\", \"timestamp\", \"execution_time_ms\"], \"properties\": {\"request_id\": {\"type\": \"string\", \"format\": \"uuid\"}, \"timestamp\": {\"type\": \"string\", \"format\": \"date-time\"}, \"execution_time_ms\": {\"type\": \"integer\", \"example\": 123}, \"trace_id\": {\"type\": \"string\", \"format\": \"uuid\"}}}}}, \"examples\": {\"complete_routing\": {\"summary\": \"All tasks successfully routed\", \"value\": {\"data\": {\"routing_plan\": {\"is_complete\": true}, \"assignments\": {\"task_1\": \"builder\", \"task_2\": \"builder\", \"task_3\": \"qa\", \"task_4\": \"deploy\"}, \"explanations\": {\"task_1\": \"Builder agent: task_type='design' + database skills\", \"task_2\": \"Builder agent: task_type='implement' + API capability\", \"task_3\": \"QA agent: task_type='test' + integration testing\", \"task_4\": \"Deploy agent: task_type='deploy' + production capability\"}, \"unassigned_tasks\": [], \"workload\": {\"builder\": 2, \"qa\": 1, \"deploy\": 1}, \"routing_metadata\": {\"rules_applied\": 12, \"rules_matched\": 4, \"casebank_hits\": 2, \"fallback_used\": false, \"cost_optimization_applied\": false}}, \"metadata\": {\"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\", \"execution_time_ms\": 123}}}, \"partial_routing\": {\"summary\": \"Some tasks unassigned (no suitable agent)\", \"value\": {\"data\": {\"routing_plan\": {\"is_complete\": false}, \"assignments\": {\"task_1\": \"marketing\", \"task_2\": \"content\"}, \"explanations\": {\"task_1\": \"Marketing agent: task_type='marketing' + strategy skills\", \"task_2\": \"Content agent: task_type='marketing' + writing skills\"}, \"unassigned_tasks\": [\"task_3\"], \"workload\": {\"marketing\": 1, \"content\": 1}, \"routing_metadata\": {\"rules_applied\": 15, \"rules_matched\": 2, \"casebank_hits\": 0, \"fallback_used\": true, \"cost_optimization_applied\": false}}, \"metadata\": {\"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\", \"execution_time_ms\": 156}}}}}}}, \"400\": {\"description\": \"Bad Request\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"examples\": {\"empty_tasks\": {\"summary\": \"No tasks provided\", \"value\": {\"error\": {\"code\": \"VALIDATION_ERROR\", \"message\": \"Tasks array cannot be empty\", \"hint\": \"Provide at least one task to route\", \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}, \"invalid_task_type\": {\"summary\": \"Invalid task type\", \"value\": {\"error\": {\"code\": \"VALIDATION_ERROR\", \"message\": \"Invalid task type\", \"hint\": \"Task type must be one of: design, implement, test, deploy, marketing, support, analytics, security\", \"details\": {\"task_id\": \"task_1\", \"task_type\": \"invalid\"}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}}}, \"404\": {\"description\": \"Not Found\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"example\": {\"error\": {\"code\": \"NOT_FOUND\", \"message\": \"DAG not found\", \"hint\": \"Verify DAG ID from /orchestrate/decompose response\", \"details\": {\"dag_id\": 42}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}, \"422\": {\"description\": \"Unprocessable Entity\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"examples\": {\"no_suitable_agent\": {\"summary\": \"No agent found for task\", \"value\": {\"error\": {\"code\": \"ROUTING_ERROR\", \"message\": \"No suitable agent found for task\", \"hint\": \"Task may require specialized agent not in registry\", \"details\": {\"task_id\": \"task_5\", \"task_type\": \"quantum_computing\", \"required_skills\": [\"quantum\", \"qiskit\"]}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}, \"all_agents_overloaded\": {\"summary\": \"All agents at max capacity\", \"value\": {\"error\": {\"code\": \"AGENT_UNAVAILABLE\", \"message\": \"All suitable agents at maximum workload\", \"hint\": \"Wait for agents to complete tasks or increase max_workload_per_agent\", \"details\": {\"task_id\": \"task_6\", \"suitable_agents\": [\"builder\", \"qa\"], \"current_workload\": {\"builder\": 10, \"qa\": 10}, \"max_workload\": 10}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}}}, \"429\": {\"$ref\": \"#/components/responses/TooManyRequests\"}, \"500\": {\"$ref\": \"#/components/responses/InternalServerError\"}}}}}, \"components\": {\"securitySchemes\": {\"ApiKeyAuth\": {\"type\": \"apiKey\", \"in\": \"header\", \"name\": \"X-API-Key\"}}, \"schemas\": {\"ErrorResponse\": {\"type\": \"object\", \"required\": [\"error\"], \"properties\": {\"error\": {\"type\": \"object\", \"required\": [\"code\", \"message\", \"request_id\", \"timestamp\"], \"properties\": {\"code\": {\"type\": \"string\"}, \"message\": {\"type\": \"string\"}, \"hint\": {\"type\": \"string\"}, \"details\": {\"type\": \"object\", \"additionalProperties\": true}, \"request_id\": {\"type\": \"string\", \"format\": \"uuid\"}, \"timestamp\": {\"type\": \"string\", \"format\": \"date-time\"}}}}}}, \"responses\": {\"TooManyRequests\": {\"description\": \"Rate limit exceeded\", \"headers\": {\"X-RateLimit-Limit\": {\"schema\": {\"type\": \"integer\"}}, \"X-RateLimit-Remaining\": {\"schema\": {\"type\": \"integer\"}}, \"X-RateLimit-Reset\": {\"schema\": {\"type\": \"integer\"}}}, \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}}}}, \"InternalServerError\": {\"description\": \"Internal server error\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}}}}}}, \"tags\": [{\"name\": \"Orchestration\", \"description\": \"Multi-layer orchestration system\"}, {\"name\": \"HALO\", \"description\": \"Hierarchical agent logic orchestration\"}]}",
    "openapi_spec:agents_ask": "{\"openapi\": \"3.1.0\", \"info\": {\"title\": \"Genesis Vertex AI Tuned Models API\", \"version\": \"1.0.0\", \"description\": \"API for invoking Genesis tuned Gemini models by role.\\n\\nThis endpoint provides access to 6 specialized tuned models:\\n- **qa**: Quality assurance, testing scenarios\\n- **support**: Customer support, troubleshooting\\n- **analyst**: Data analysis, insights generation\\n- **legal**: Legal compliance, contract review\\n- **content**: Content writing, blog posts\\n- **security**: Security audits, vulnerability analysis\\n\\nEach model is fine-tuned on domain-specific data for optimal performance.\\nFalls back to base Gemini 2.0 Flash model if tuned model unavailable.\\n\\n**Author:** Hudson (Code Review & Quality Specialist)\\n**Created:** 2025-10-30\\n**Source File:** `api/routes/agents.py`\\n\"}, \"servers\": [{\"url\": \"http://localhost:8080\", \"description\": \"Development server\"}, {\"url\": \"https://staging.genesis.ai/api\", \"description\": \"Staging server\"}, {\"url\": \"https://genesis.ai/api\", \"description\": \"Production server\"}], \"security\": [{\"ApiKeyAuth\": []}], \"paths\": {\"/agents/ask\": {\"post\": {\"summary\": \"Call tuned Gemini model by role\", \"description\": \"Invoke a domain-specific tuned Gemini model to answer questions or generate content.\\n\\n**Flow:**\\n1. Validate role and prompt\\n2. Load tuned model from Vertex AI (or fall back to base model)\\n3. Generate content using Gemini\\n4. Return response with metadata\\n\\n**Rate Limits:** 100 requests/minute per API key\\n**Timeout:** 30 seconds\\n**Max Tokens:** 8192 output tokens\\n\", \"operationId\": \"askAgent\", \"tags\": [\"VertexAI\", \"Agents\"], \"parameters\": [{\"name\": \"X-Idempotency-Key\", \"in\": \"header\", \"required\": false, \"schema\": {\"type\": \"string\", \"format\": \"uuid\"}, \"description\": \"Optional idempotency key for retries.\\nSame key + params within 24h returns cached response.\\n\"}, {\"name\": \"X-Schema-Version\", \"in\": \"header\", \"required\": false, \"schema\": {\"type\": \"string\", \"pattern\": \"^v\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\", \"default\": \"v1.0.0\"}, \"description\": \"API schema version\"}, {\"name\": \"X-Correlation-Id\", \"in\": \"header\", \"required\": false, \"schema\": {\"type\": \"string\", \"format\": \"uuid\"}, \"description\": \"OpenTelemetry correlation ID\"}], \"requestBody\": {\"required\": true, \"content\": {\"application/json\": {\"schema\": {\"type\": \"object\", \"required\": [\"role\", \"prompt\"], \"properties\": {\"role\": {\"type\": \"string\", \"enum\": [\"qa\", \"support\", \"analyst\", \"legal\", \"content\", \"security\"], \"description\": \"Agent role determining which tuned model to use\", \"example\": \"qa\"}, \"prompt\": {\"type\": \"string\", \"minLength\": 1, \"maxLength\": 10000, \"description\": \"User question or task description\", \"example\": \"Generate test cases for a login form with email and password fields\"}, \"temperature\": {\"type\": \"number\", \"minimum\": 0.0, \"maximum\": 2.0, \"default\": 0.7, \"description\": \"Sampling temperature (0=deterministic, 2=creative)\", \"example\": 0.7}, \"max_output_tokens\": {\"type\": \"integer\", \"minimum\": 1, \"maximum\": 8192, \"default\": 2048, \"description\": \"Maximum output tokens to generate\", \"example\": 2048}, \"top_p\": {\"type\": \"number\", \"minimum\": 0.0, \"maximum\": 1.0, \"default\": 0.95, \"description\": \"Nucleus sampling parameter\", \"example\": 0.95}, \"top_k\": {\"type\": \"integer\", \"minimum\": 1, \"maximum\": 40, \"default\": 40, \"description\": \"Top-k sampling parameter\", \"example\": 40}}}, \"examples\": {\"qa_example\": {\"summary\": \"QA Agent - Generate test cases\", \"value\": {\"role\": \"qa\", \"prompt\": \"Generate test cases for a login form with email and password fields\", \"temperature\": 0.3, \"max_output_tokens\": 1024}}, \"support_example\": {\"summary\": \"Support Agent - Troubleshoot issue\", \"value\": {\"role\": \"support\", \"prompt\": \"User reports: 'Cannot log in, getting 'Invalid credentials' error despite correct password'\", \"temperature\": 0.5}}, \"analyst_example\": {\"summary\": \"Analyst Agent - Analyze data\", \"value\": {\"role\": \"analyst\", \"prompt\": \"Analyze website traffic: 10k visits/day, 2% conversion, $50 AOV. Recommend optimization strategies.\", \"temperature\": 0.7, \"max_output_tokens\": 2048}}, \"legal_example\": {\"summary\": \"Legal Agent - Review contract\", \"value\": {\"role\": \"legal\", \"prompt\": \"Review this SaaS terms of service for potential issues: [contract text]\", \"temperature\": 0.2}}, \"content_example\": {\"summary\": \"Content Agent - Write blog post\", \"value\": {\"role\": \"content\", \"prompt\": \"Write a 500-word blog post about the benefits of AI agents for small businesses\", \"temperature\": 0.9, \"max_output_tokens\": 1500}}, \"security_example\": {\"summary\": \"Security Agent - Audit code\", \"value\": {\"role\": \"security\", \"prompt\": \"Audit this API endpoint for security vulnerabilities: [code snippet]\", \"temperature\": 0.3}}}}}}, \"responses\": {\"200\": {\"description\": \"Success - Model generated response\", \"headers\": {\"X-Request-Id\": {\"schema\": {\"type\": \"string\", \"format\": \"uuid\"}, \"description\": \"Unique request ID\"}, \"X-Schema-Version\": {\"schema\": {\"type\": \"string\"}, \"description\": \"Schema version used\"}, \"X-RateLimit-Limit\": {\"schema\": {\"type\": \"integer\", \"example\": 100}, \"description\": \"Rate limit (requests/minute)\"}, \"X-RateLimit-Remaining\": {\"schema\": {\"type\": \"integer\", \"example\": 95}, \"description\": \"Remaining requests in window\"}, \"X-RateLimit-Reset\": {\"schema\": {\"type\": \"integer\", \"format\": \"int64\"}, \"description\": \"Unix timestamp when limit resets\"}}, \"content\": {\"application/json\": {\"schema\": {\"type\": \"object\", \"required\": [\"data\", \"metadata\"], \"properties\": {\"data\": {\"type\": \"object\", \"required\": [\"role\", \"answer\", \"model_used\"], \"properties\": {\"role\": {\"type\": \"string\", \"enum\": [\"qa\", \"support\", \"analyst\", \"legal\", \"content\", \"security\"], \"description\": \"Role that was invoked\", \"example\": \"qa\"}, \"answer\": {\"type\": \"string\", \"description\": \"Generated response from model\", \"example\": \"Test Cases for Login Form:\\n1. Valid email + valid password \\u2192 Success\\n2. Invalid email format \\u2192 Error \\\"Invalid email\\\"\\n3. Empty password \\u2192 Error \\\"Password required\\\"\\n4. Incorrect password \\u2192 Error \\\"Invalid credentials\\\"\\n5. SQL injection attempt \\u2192 Sanitized, Error\\n6. XSS attempt in email field \\u2192 Sanitized, Error\\n\"}, \"model_used\": {\"type\": \"string\", \"description\": \"Model that generated response (tuned or base)\", \"example\": \"projects/123/locations/us-central1/models/genesis-qa-v1\", \"enum\": [\"tuned\", \"base\"]}, \"confidence\": {\"type\": \"number\", \"minimum\": 0.0, \"maximum\": 1.0, \"description\": \"Model confidence score (if available)\", \"example\": 0.92}}}, \"metadata\": {\"type\": \"object\", \"required\": [\"request_id\", \"timestamp\", \"execution_time_ms\", \"tokens_used\"], \"properties\": {\"request_id\": {\"type\": \"string\", \"format\": \"uuid\", \"description\": \"Request ID for debugging\", \"example\": \"550e8400-e29b-41d4-a716-446655440000\"}, \"timestamp\": {\"type\": \"string\", \"format\": \"date-time\", \"description\": \"ISO8601 response timestamp\", \"example\": \"2025-10-30T12:00:00Z\"}, \"execution_time_ms\": {\"type\": \"integer\", \"description\": \"Server execution time (milliseconds)\", \"example\": 1234}, \"tokens_used\": {\"type\": \"object\", \"required\": [\"input_tokens\", \"output_tokens\", \"total_tokens\"], \"properties\": {\"input_tokens\": {\"type\": \"integer\", \"example\": 25}, \"output_tokens\": {\"type\": \"integer\", \"example\": 150}, \"total_tokens\": {\"type\": \"integer\", \"example\": 175}}}, \"fallback_used\": {\"type\": \"boolean\", \"description\": \"True if base model was used (tuned model failed)\", \"example\": false}, \"trace_id\": {\"type\": \"string\", \"format\": \"uuid\", \"description\": \"OpenTelemetry trace ID\", \"example\": \"7f8d9c2a-3b4e-5f6a-7c8d-9e0f1a2b3c4d\"}}}}}, \"examples\": {\"success_tuned\": {\"summary\": \"Successful response from tuned model\", \"value\": {\"data\": {\"role\": \"qa\", \"answer\": \"Test Cases for Login Form:\\n1. Valid credentials \\u2192 Success (200)\\n2. Invalid email format \\u2192 Error \\\"Invalid email\\\" (400)\\n3. Empty password \\u2192 Error \\\"Password required\\\" (400)\\n4. Incorrect password \\u2192 Error \\\"Invalid credentials\\\" (401)\\n5. SQL injection \\u2192 Sanitized, Error (400)\\n6. XSS in email \\u2192 Sanitized, Error (400)\\n\", \"model_used\": \"tuned\", \"confidence\": 0.92}, \"metadata\": {\"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\", \"execution_time_ms\": 1234, \"tokens_used\": {\"input_tokens\": 25, \"output_tokens\": 150, \"total_tokens\": 175}, \"fallback_used\": false}}}, \"success_fallback\": {\"summary\": \"Successful response from base model (fallback)\", \"value\": {\"data\": {\"role\": \"qa\", \"answer\": \"Test cases: 1. Valid login, 2. Invalid email, 3. Empty password...\", \"model_used\": \"base\"}, \"metadata\": {\"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\", \"execution_time_ms\": 1500, \"tokens_used\": {\"input_tokens\": 25, \"output_tokens\": 80, \"total_tokens\": 105}, \"fallback_used\": true}}}}}}}, \"400\": {\"description\": \"Bad Request - Invalid parameters\", \"headers\": {\"X-Request-Id\": {\"schema\": {\"type\": \"string\", \"format\": \"uuid\"}}}, \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"examples\": {\"invalid_role\": {\"summary\": \"Invalid role\", \"value\": {\"error\": {\"code\": \"VALIDATION_ERROR\", \"message\": \"Invalid role parameter\", \"hint\": \"Role must be one of: qa, support, analyst, legal, content, security\", \"details\": {\"field\": \"role\", \"value\": \"invalid\", \"allowed\": [\"qa\", \"support\", \"analyst\", \"legal\", \"content\", \"security\"]}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}, \"empty_prompt\": {\"summary\": \"Empty prompt\", \"value\": {\"error\": {\"code\": \"VALIDATION_ERROR\", \"message\": \"Prompt cannot be empty\", \"hint\": \"Provide a non-empty prompt string\", \"details\": {\"field\": \"prompt\", \"min_length\": 1}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}, \"prompt_too_long\": {\"summary\": \"Prompt exceeds max length\", \"value\": {\"error\": {\"code\": \"VALIDATION_ERROR\", \"message\": \"Prompt exceeds maximum length\", \"hint\": \"Prompt must be <= 10000 characters\", \"details\": {\"field\": \"prompt\", \"length\": 12000, \"max_length\": 10000}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}}}, \"401\": {\"description\": \"Unauthorized - Missing API key\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"example\": {\"error\": {\"code\": \"AUTHENTICATION_ERROR\", \"message\": \"Missing API key\", \"hint\": \"Include X-API-Key header with valid API key\", \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}, \"403\": {\"description\": \"Forbidden - Invalid API key\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"example\": {\"error\": {\"code\": \"AUTHORIZATION_ERROR\", \"message\": \"Invalid API key\", \"hint\": \"Verify your API key is correct and not expired\", \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}, \"429\": {\"description\": \"Rate Limit Exceeded\", \"headers\": {\"X-RateLimit-Limit\": {\"schema\": {\"type\": \"integer\"}}, \"X-RateLimit-Remaining\": {\"schema\": {\"type\": \"integer\"}}, \"X-RateLimit-Reset\": {\"schema\": {\"type\": \"integer\"}}}, \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"example\": {\"error\": {\"code\": \"RATE_LIMIT_EXCEEDED\", \"message\": \"Rate limit exceeded (100 requests/minute)\", \"hint\": \"Wait 42 seconds before retrying\", \"details\": {\"limit\": 100, \"remaining\": 0, \"reset\": 1730332842}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}, \"422\": {\"description\": \"Unprocessable Entity - Model execution failed\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"examples\": {\"quota_exceeded\": {\"summary\": \"Vertex AI quota exceeded\", \"value\": {\"error\": {\"code\": \"LLM_ERROR\", \"message\": \"Vertex AI quota exceeded\", \"hint\": \"Upgrade your Vertex AI quota or wait for quota reset\", \"details\": {\"provider\": \"vertex_ai\", \"error_type\": \"quota_exceeded\"}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}, \"safety_filter\": {\"summary\": \"Content blocked by safety filter\", \"value\": {\"error\": {\"code\": \"LLM_ERROR\", \"message\": \"Content blocked by safety filter\", \"hint\": \"Rephrase prompt to avoid potentially harmful content\", \"details\": {\"provider\": \"vertex_ai\", \"error_type\": \"safety_filter\", \"blocked_categories\": [\"HARM_CATEGORY_HATE_SPEECH\"]}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}}}, \"500\": {\"description\": \"Internal Server Error\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"example\": {\"error\": {\"code\": \"INTERNAL_ERROR\", \"message\": \"Both tuned and base models failed\", \"hint\": \"Contact support with request_id if issue persists\", \"details\": {\"tuned_error\": \"Connection timeout\", \"base_error\": \"Service unavailable\"}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}, \"503\": {\"description\": \"Service Unavailable\", \"headers\": {\"Retry-After\": {\"schema\": {\"type\": \"integer\", \"example\": 60}}}, \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"example\": {\"error\": {\"code\": \"SERVICE_UNAVAILABLE\", \"message\": \"Vertex AI service temporarily unavailable\", \"hint\": \"Retry after 60 seconds\", \"details\": {\"provider\": \"vertex_ai\", \"status\": \"503\"}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}}}}}, \"components\": {\"securitySchemes\": {\"ApiKeyAuth\": {\"type\": \"apiKey\", \"in\": \"header\", \"name\": \"X-API-Key\", \"description\": \"API key for authentication (required in production)\"}}, \"schemas\": {\"ErrorResponse\": {\"type\": \"object\", \"required\": [\"error\"], \"properties\": {\"error\": {\"type\": \"object\", \"required\": [\"code\", \"message\", \"request_id\", \"timestamp\"], \"properties\": {\"code\": {\"type\": \"string\", \"enum\": [\"VALIDATION_ERROR\", \"AUTHENTICATION_ERROR\", \"AUTHORIZATION_ERROR\", \"RATE_LIMIT_EXCEEDED\", \"LLM_ERROR\", \"INTERNAL_ERROR\", \"SERVICE_UNAVAILABLE\"]}, \"message\": {\"type\": \"string\"}, \"hint\": {\"type\": \"string\"}, \"details\": {\"type\": \"object\", \"additionalProperties\": true}, \"request_id\": {\"type\": \"string\", \"format\": \"uuid\"}, \"timestamp\": {\"type\": \"string\", \"format\": \"date-time\"}, \"trace_id\": {\"type\": \"string\", \"format\": \"uuid\"}}}}}}}, \"tags\": [{\"name\": \"VertexAI\", \"description\": \"Tuned Gemini model invocation\"}, {\"name\": \"Agents\", \"description\": \"Agent-related operations\"}]}",
    "openapi_spec:orchestrate_task": "{\"openapi\": \"3.1.0\", \"info\": {\"title\": \"Genesis HTDAG Task Decomposition API\", \"version\": \"1.0.0\", \"description\": \"API for hierarchical task decomposition into directed acyclic graphs (DAGs).\\n\\nBased on Deep Agent (arXiv:2502.07056), this endpoint decomposes complex user requests\\ninto structured task hierarchies with dependencies.\\n\\n**Key Features:**\\n- LLM-based decomposition with security hardening\\n- Recursive task breakdown (max 5 levels)\\n- Cycle detection and DAG validation\\n- Test-time compute optimization (best-of-N, beam search)\\n- Graceful fallback to heuristic decomposition\\n- Circuit breaker for repeated LLM failures\\n\\n**Author:** Hudson (Code Review & Quality Specialist)\\n**Created:** 2025-10-30\\n**Source File:** `infrastructure/htdag_planner.py`\\n\"}, \"servers\": [{\"url\": \"http://localhost:8080\", \"description\": \"Development server\"}, {\"url\": \"https://staging.genesis.ai/api\", \"description\": \"Staging server\"}, {\"url\": \"https://genesis.ai/api\", \"description\": \"Production server\"}], \"security\": [{\"ApiKeyAuth\": []}], \"paths\": {\"/orchestrate/decompose\": {\"post\": {\"summary\": \"Decompose user request into hierarchical task DAG\", \"description\": \"Decomposes a high-level user request into a directed acyclic graph (DAG) of subtasks.\\n\\n**Decomposition Process:**\\n1. Sanitize and validate input (max 5000 chars, no malicious patterns)\\n2. LLM generates initial task breakdown\\n3. Security validation (prompt injection detection)\\n4. Recursive decomposition of complex tasks (max depth 5)\\n5. Cycle detection and DAG validation\\n6. Optional test-time compute optimization (best-of-N sampling)\\n\\n**Example Use Cases:**\\n- \\\"Build a SaaS product for project management\\\"\\n  \\u2192 Design, Implement, Test, Deploy, Market tasks\\n- \\\"Analyze sales data and create dashboard\\\"\\n  \\u2192 Data collection, Analysis, Visualization tasks\\n\\n**Limits:**\\n- Max request length: 5000 characters\\n- Max recursion depth: 5 levels\\n- Max total tasks: 1000 per DAG\\n- Max updates per DAG: 10\\n\", \"operationId\": \"decomposeTask\", \"tags\": [\"Orchestration\", \"HTDAG\"], \"parameters\": [{\"name\": \"X-Idempotency-Key\", \"in\": \"header\", \"required\": true, \"schema\": {\"type\": \"string\", \"format\": \"uuid\"}, \"description\": \"Required idempotency key for task decomposition.\\nPrevents duplicate DAGs from accidental retries.\\n\"}, {\"name\": \"X-Schema-Version\", \"in\": \"header\", \"required\": false, \"schema\": {\"type\": \"string\", \"pattern\": \"^v\\\\d+\\\\.\\\\d+\\\\.\\\\d+$\", \"default\": \"v1.0.0\"}}, {\"name\": \"X-Correlation-Id\", \"in\": \"header\", \"required\": false, \"schema\": {\"type\": \"string\", \"format\": \"uuid\"}}], \"requestBody\": {\"required\": true, \"content\": {\"application/json\": {\"schema\": {\"type\": \"object\", \"required\": [\"user_request\"], \"properties\": {\"user_request\": {\"type\": \"string\", \"minLength\": 10, \"maxLength\": 5000, \"description\": \"High-level task description from user\", \"example\": \"Build a SaaS product for small business project management with team collaboration features\"}, \"context\": {\"type\": \"object\", \"description\": \"Optional context for decomposition\", \"additionalProperties\": true, \"properties\": {\"domain\": {\"type\": \"string\", \"description\": \"Domain hint (e.g., \\\"web_app\\\", \\\"data_analysis\\\", \\\"marketing\\\")\", \"example\": \"web_app\"}, \"constraints\": {\"type\": \"object\", \"description\": \"Constraints on decomposition\", \"properties\": {\"max_depth\": {\"type\": \"integer\", \"minimum\": 1, \"maximum\": 5, \"default\": 5}, \"max_tasks\": {\"type\": \"integer\", \"minimum\": 1, \"maximum\": 1000, \"default\": 100}, \"priority\": {\"type\": \"string\", \"enum\": [\"low\", \"medium\", \"high\", \"critical\"], \"default\": \"medium\"}}}, \"user_preferences\": {\"type\": \"object\", \"description\": \"User preferences for decomposition\", \"properties\": {\"granularity\": {\"type\": \"string\", \"enum\": [\"coarse\", \"medium\", \"fine\"], \"default\": \"medium\", \"description\": \"Task granularity level\"}}}}}, \"enable_testtime_compute\": {\"type\": \"boolean\", \"default\": false, \"description\": \"Enable test-time compute optimization (best-of-N, beam search).\\nIncreases quality but also latency and cost.\\n\"}, \"testtime_strategy\": {\"type\": \"string\", \"enum\": [\"best_of_n\", \"beam_search\", \"multi_agent_verification\"], \"default\": \"best_of_n\", \"description\": \"Test-time compute strategy (if enabled)\"}, \"testtime_samples\": {\"type\": \"integer\", \"minimum\": 1, \"maximum\": 20, \"default\": 5, \"description\": \"Number of samples for test-time compute\"}}}, \"examples\": {\"simple_request\": {\"summary\": \"Simple web app decomposition\", \"value\": {\"user_request\": \"Build a todo list web app with user authentication\", \"context\": {\"domain\": \"web_app\", \"constraints\": {\"max_depth\": 3, \"priority\": \"medium\"}}}}, \"complex_request\": {\"summary\": \"Complex SaaS product with test-time compute\", \"value\": {\"user_request\": \"Build a SaaS product for small business project management with team collaboration, time tracking, and reporting features\", \"context\": {\"domain\": \"web_app\", \"constraints\": {\"max_depth\": 5, \"max_tasks\": 50, \"priority\": \"high\"}, \"user_preferences\": {\"granularity\": \"fine\"}}, \"enable_testtime_compute\": true, \"testtime_strategy\": \"best_of_n\", \"testtime_samples\": 10}}, \"data_analysis\": {\"summary\": \"Data analysis task\", \"value\": {\"user_request\": \"Analyze sales data from Q4 2024, identify trends, and create executive dashboard\", \"context\": {\"domain\": \"data_analysis\", \"constraints\": {\"max_depth\": 4}}}}}}}}, \"responses\": {\"200\": {\"description\": \"Success - Task decomposed into DAG\", \"headers\": {\"X-Request-Id\": {\"schema\": {\"type\": \"string\", \"format\": \"uuid\"}}, \"X-Schema-Version\": {\"schema\": {\"type\": \"string\"}}, \"X-RateLimit-Limit\": {\"schema\": {\"type\": \"integer\"}}, \"X-RateLimit-Remaining\": {\"schema\": {\"type\": \"integer\"}}, \"X-RateLimit-Reset\": {\"schema\": {\"type\": \"integer\"}}}, \"content\": {\"application/json\": {\"schema\": {\"type\": \"object\", \"required\": [\"data\", \"metadata\"], \"properties\": {\"data\": {\"type\": \"object\", \"required\": [\"dag_id\", \"tasks\", \"dependencies\"], \"properties\": {\"dag_id\": {\"type\": \"integer\", \"description\": \"Unique DAG identifier\", \"example\": 42}, \"tasks\": {\"type\": \"array\", \"description\": \"List of tasks in DAG\", \"items\": {\"type\": \"object\", \"required\": [\"task_id\", \"description\", \"task_type\", \"status\"], \"properties\": {\"task_id\": {\"type\": \"string\", \"description\": \"Unique task identifier\", \"example\": \"task_1\"}, \"description\": {\"type\": \"string\", \"description\": \"Task description\", \"example\": \"Design database schema\"}, \"task_type\": {\"type\": \"string\", \"description\": \"Task category\", \"enum\": [\"design\", \"implement\", \"test\", \"deploy\", \"marketing\", \"support\", \"analytics\", \"security\"], \"example\": \"design\"}, \"status\": {\"type\": \"string\", \"enum\": [\"pending\", \"ready\", \"in_progress\", \"completed\", \"failed\"], \"default\": \"pending\", \"example\": \"pending\"}, \"priority\": {\"type\": \"number\", \"minimum\": 0.0, \"maximum\": 1.0, \"description\": \"Task priority (0=low, 1=high)\", \"example\": 0.8}, \"estimated_complexity\": {\"type\": \"string\", \"enum\": [\"trivial\", \"easy\", \"medium\", \"hard\", \"expert\"], \"example\": \"medium\"}}}}, \"dependencies\": {\"type\": \"object\", \"description\": \"Task dependencies (task_id -> [parent_task_ids])\", \"additionalProperties\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"example\": {\"task_2\": [\"task_1\"], \"task_3\": [\"task_1\"], \"task_4\": [\"task_2\", \"task_3\"]}}, \"root_tasks\": {\"type\": \"array\", \"description\": \"Tasks with no dependencies (entry points)\", \"items\": {\"type\": \"string\"}, \"example\": [\"task_1\"]}, \"leaf_tasks\": {\"type\": \"array\", \"description\": \"Tasks with no dependents (completion points)\", \"items\": {\"type\": \"string\"}, \"example\": [\"task_4\"]}, \"decomposition_metadata\": {\"type\": \"object\", \"description\": \"Metadata about decomposition process\", \"properties\": {\"method\": {\"type\": \"string\", \"enum\": [\"llm\", \"heuristic\", \"testtime_compute\"], \"example\": \"llm\"}, \"llm_model\": {\"type\": \"string\", \"example\": \"gpt-4o\"}, \"recursion_depth\": {\"type\": \"integer\", \"example\": 3}, \"total_tasks\": {\"type\": \"integer\", \"example\": 12}, \"testtime_samples_used\": {\"type\": \"integer\", \"example\": 5}, \"best_sample_score\": {\"type\": \"number\", \"example\": 0.92}}}}}, \"metadata\": {\"type\": \"object\", \"required\": [\"request_id\", \"timestamp\", \"execution_time_ms\"], \"properties\": {\"request_id\": {\"type\": \"string\", \"format\": \"uuid\"}, \"timestamp\": {\"type\": \"string\", \"format\": \"date-time\"}, \"execution_time_ms\": {\"type\": \"integer\", \"example\": 2345}, \"tokens_used\": {\"type\": \"integer\", \"example\": 1234}, \"trace_id\": {\"type\": \"string\", \"format\": \"uuid\"}}}}}, \"examples\": {\"simple_dag\": {\"summary\": \"Simple 4-task DAG\", \"value\": {\"data\": {\"dag_id\": 42, \"tasks\": [{\"task_id\": \"task_1\", \"description\": \"Design database schema\", \"task_type\": \"design\", \"status\": \"pending\", \"priority\": 0.8, \"estimated_complexity\": \"medium\"}, {\"task_id\": \"task_2\", \"description\": \"Implement backend API\", \"task_type\": \"implement\", \"status\": \"pending\", \"priority\": 0.7, \"estimated_complexity\": \"hard\"}, {\"task_id\": \"task_3\", \"description\": \"Build frontend UI\", \"task_type\": \"implement\", \"status\": \"pending\", \"priority\": 0.6, \"estimated_complexity\": \"medium\"}, {\"task_id\": \"task_4\", \"description\": \"Deploy to production\", \"task_type\": \"deploy\", \"status\": \"pending\", \"priority\": 0.9, \"estimated_complexity\": \"easy\"}], \"dependencies\": {\"task_2\": [\"task_1\"], \"task_3\": [\"task_1\"], \"task_4\": [\"task_2\", \"task_3\"]}, \"root_tasks\": [\"task_1\"], \"leaf_tasks\": [\"task_4\"], \"decomposition_metadata\": {\"method\": \"llm\", \"llm_model\": \"gpt-4o\", \"recursion_depth\": 2, \"total_tasks\": 4}}, \"metadata\": {\"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\", \"execution_time_ms\": 2345, \"tokens_used\": 1234}}}}}}}, \"400\": {\"description\": \"Bad Request - Invalid input\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"examples\": {\"request_too_long\": {\"summary\": \"Request exceeds max length\", \"value\": {\"error\": {\"code\": \"VALIDATION_ERROR\", \"message\": \"Request exceeds maximum length\", \"hint\": \"Request must be <= 5000 characters\", \"details\": {\"length\": 6000, \"max_length\": 5000}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}, \"malicious_input\": {\"summary\": \"Security validation failed\", \"value\": {\"error\": {\"code\": \"SECURITY_ERROR\", \"message\": \"Request contains suspicious patterns\", \"hint\": \"Remove prompt injection attempts or system commands\", \"details\": {\"detected_patterns\": [\"ignore_previous_instructions\", \"system_command\"]}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}}}, \"401\": {\"$ref\": \"#/components/responses/Unauthorized\"}, \"403\": {\"$ref\": \"#/components/responses/Forbidden\"}, \"409\": {\"description\": \"Conflict - Idempotency key mismatch\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"example\": {\"error\": {\"code\": \"IDEMPOTENCY_MISMATCH\", \"message\": \"Idempotency key already used with different parameters\", \"hint\": \"Use a new idempotency key or retry with exact same parameters\", \"details\": {\"existing_dag_id\": 41}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}, \"422\": {\"description\": \"Unprocessable Entity - Decomposition failed\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}, \"examples\": {\"llm_failure\": {\"summary\": \"LLM decomposition failed\", \"value\": {\"error\": {\"code\": \"DECOMPOSITION_ERROR\", \"message\": \"LLM decomposition failed after 3 retries\", \"hint\": \"Simplify request or try again later\", \"details\": {\"llm_error\": \"Rate limit exceeded\", \"fallback_used\": true, \"fallback_success\": false}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}, \"cycle_detected\": {\"summary\": \"Cyclic dependency detected\", \"value\": {\"error\": {\"code\": \"DECOMPOSITION_ERROR\", \"message\": \"Cyclic dependency detected in task graph\", \"hint\": \"Task dependencies must form a DAG (no cycles)\", \"details\": {\"cycle\": [\"task_2\", \"task_3\", \"task_4\", \"task_2\"]}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}, \"too_many_tasks\": {\"summary\": \"Task limit exceeded\", \"value\": {\"error\": {\"code\": \"RESOURCE_ERROR\", \"message\": \"Decomposition exceeded maximum task limit\", \"hint\": \"Reduce scope or increase max_tasks limit\", \"details\": {\"tasks_generated\": 1050, \"max_tasks\": 1000}, \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\", \"timestamp\": \"2025-10-30T12:00:00Z\"}}}}}}}, \"429\": {\"$ref\": \"#/components/responses/TooManyRequests\"}, \"500\": {\"$ref\": \"#/components/responses/InternalServerError\"}, \"503\": {\"$ref\": \"#/components/responses/ServiceUnavailable\"}}}}}, \"components\": {\"securitySchemes\": {\"ApiKeyAuth\": {\"type\": \"apiKey\", \"in\": \"header\", \"name\": \"X-API-Key\"}}, \"schemas\": {\"ErrorResponse\": {\"type\": \"object\", \"required\": [\"error\"], \"properties\": {\"error\": {\"type\": \"object\", \"required\": [\"code\", \"message\", \"request_id\", \"timestamp\"], \"properties\": {\"code\": {\"type\": \"string\"}, \"message\": {\"type\": \"string\"}, \"hint\": {\"type\": \"string\"}, \"details\": {\"type\": \"object\", \"additionalProperties\": true}, \"request_id\": {\"type\": \"string\", \"format\": \"uuid\"}, \"timestamp\": {\"type\": \"string\", \"format\": \"date-time\"}}}}}}, \"responses\": {\"Unauthorized\": {\"description\": \"Unauthorized - Missing API key\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}}}}, \"Forbidden\": {\"description\": \"Forbidden - Invalid API key\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}}}}, \"TooManyRequests\": {\"description\": \"Too Many Requests\", \"headers\": {\"X-RateLimit-Limit\": {\"schema\": {\"type\": \"integer\"}}, \"X-RateLimit-Remaining\": {\"schema\": {\"type\": \"integer\"}}, \"X-RateLimit-Reset\": {\"schema\": {\"type\": \"integer\"}}}, \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}}}}, \"InternalServerError\": {\"description\": \"Internal Server Error\", \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}}}}, \"ServiceUnavailable\": {\"description\": \"Service Unavailable\", \"headers\": {\"Retry-After\": {\"schema\": {\"type\": \"integer\"}}}, \"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/ErrorResponse\"}}}}}}, \"tags\": [{\"name\": \"Orchestration\", \"description\": \"Multi-layer orchestration system\"}, {\"name\": \"HTDAG\", \"description\": \"Hierarchical task decomposition\"}]}"
  }
}